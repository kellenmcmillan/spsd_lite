<div class="secondary-dialog-curtain mediaVault" ng-show="media_vault_visible == true" ng-controller="lightweightController">
    <md-card class="suite-dialog md-card-base">
        <md-card-title>
            <md-card-title-text>
                <span class="md-headline">Media Vault</span>
            </md-card-title-text>
        </md-card-title>
        <md-card-content flex>
                <md-content class="md-padding" flex>
                    <md-tabs id="views">
                        <md-tab id="MediaFiles">
                            <md-tab-label>Media Files</md-tab-label>
                            <md-tab-body>
                                <div layout="column" layout-wrap layout-align="space-around center" flex>
                                    <div layout="column" layout-gt-sm="row" layout-align="center start" layout-align-gt-sm="start center" layout-margin flex="100" style="width: 100%">
                                        <div layout="row" layout-align="start center">
                                            <md-button ng-disabled="currentPage == 0" ng-click="currentPage = 0" class="md-icon-button" aria-label="Clear Media Search">
                                                <md-icon style="color: {{base_hue_darker.value}};">first_page</md-icon>
                                            </md-button>
                                            <md-button ng-disabled="currentPage == 0" ng-click="currentPage=currentPage-1" class="md-icon-button" aria-label="Clear Media Search">
                                                <md-icon style="color: {{base_hue_darker.value}};">chevron_left</md-icon>
                                            </md-button>
                                            <span>{{currentPage+1}}/{{numberOfPages}}</span>
                                            <md-button ng-disabled="currentPage == numberOfPages - 1" ng-click="currentPage=currentPage+1" class="md-icon-button" aria-label="Clear Media Search">
                                                <md-icon style="color: {{base_hue_darker.value}};">chevron_right</md-icon>
                                            </md-button>
                                            <md-button ng-disabled="currentPage == numberOfPages - 1" ng-click="currentPage = numberOfPages - 1" class="md-icon-button" aria-label="Clear Media Search">
                                                <md-icon style="color: {{base_hue_darker.value}};">last_page</md-icon>
                                            </md-button>
                                            <md-button ng-show="elementToUpdate" ng-click="selectMedia(mediaVaultSelect); closeMediaVault()" class="md-icon-button" aria-label="Clear Media Search">
                                                <md-icon style="color: {{base_hue_darker.value}};">done_all</md-icon>
                                            </md-button>
                                        </div>
                                        <div flex="100" flex-gt-sm="50" layout="row" layout="start center" style="max-height: 38px;">
                                            <!-- <md-button ng-click="clearQueryMedia(); queryFilter = null" class="button-color-border">Clear Search</md-button> -->
                                            <md-button ng-click="clearQueryMedia(); queryFilter = null" class="md-icon-button" aria-label="Clear Media Search">
                                                <md-icon style="color: {{base_hue_darker.value}};">clear</md-icon>
                                            </md-button>
                                            <md-button ng-click="queryMedia(queryFilter)" class="md-icon-button" aria-label="Search Media">
                                                <md-icon style="color: {{base_hue_darker.value}};">search</md-icon>
                                            </md-button>
                                            <md-input-container class="md-block lightweight-md-input" style="margin: 0;" flex>
                                                <label>Search</label>
                                                <input ng-model="queryFilter">
                                            </md-input-container>
                                        </div>
                                    </div>
                                    <md-radio-group ng-model="mediaVaultSelect" layout="column" layout-gt-sm="row" layout-wrap layout-align="space-around center" flex>
                                        <md-card ng-cloak ng-show="imagelist" class="md-card-base" ng-repeat="image in imagelist | startFrom:currentPage*pageSize | limitTo:pageSize track by $index" flex flex-gt-sm="30" style="position: relative;">
                                            <md-button ng-show="!gallery_detail_view" class="md-fab md-mini" aria-label="edit staff member" style="position: absolute; top: 8px; right: 8px; background-color: {{base_hue_lightest.value}}!important;" ng-click="gallery_detail_view = true">
                                                <md-icon style="color: {{primary_hue_normal.value}}; cursor: pointer;" aria-label="edit staff member" md-font-library="material-icons">mode_edit</md-icon>
                                            </md-button>
                                            <md-button ng-show="gallery_detail_view" class="md-fab md-mini" aria-label="edit staff member" style="position: absolute; top: 8px; right: 8px; background-color: {{primary_hue_normal.value}}!important;" ng-click="gallery_detail_view = false">
                                                <md-icon style="color: {{base_hue_lightest.value}}; cursor: pointer;" aria-label="edit staff member" md-font-library="material-icons">mode_edit</md-icon>
                                            </md-button>
                                            <img ng-show="!gallery_detail_view" ng-cloak ng-src="{{image.source}}" class="md-card-image" ng-init="gallery_detail_view = false">
                                            <md-card-content ng-show="gallery_detail_view">
                                                <md-tabs md-dynamic-height md-border-bottom>
                                                    <md-tab label="Details" layout-padding>
                                                        <md-content>
                                                            <md-list-item style="margin-top:8px;">
                                                                <md-input-container class="md-block lightweight-md-input" flex>
                                                                    <label>Cloud Storage Location</label>
                                                                    <input ng-model="image.source">
                                                                </md-input-container>
                                                            </md-list-item>
                                                            <md-list-item>
                                                                <md-input-container class="md-block lightweight-md-input" flex>
                                                                    <label>Display Name</label>
                                                                    <input ng-model="image.metadata.name">
                                                                </md-input-container>
                                                            </md-list-item>
                                                            <md-list-item>
                                                                <md-input-container class="md-block lightweight-md-input" flex>
                                                                    <label>Description</label>
                                                                    <input ng-model="image.metadata.description">
                                                                </md-input-container>
                                                            </md-list-item>                                                      
                                                        </md-content>
                                                    </md-tab>
                                                    <md-tab label="Settings" layout-padding>
                                                        <md-content>
                                                            <md-list-item>
                                                                <md-input-container style="margin-right: 16px" class="md-block lightweight-md-dropdown" flex>
                                                                    <label class="lightweight-md-option-label">Choose Tags</label>
                                                                    <md-select ng-model="image.metadata.tags" multiple>
                                                                        <md-option class="lightweight-md-option" ng-repeat="fileTag in taglist" value="{{fileTag.tag}}">
                                                                            {{fileTag.tag}}
                                                                        </md-option>
                                                                    </md-select>
                                                                </md-input-container>
                                                            </md-list-item>
                                                            <md-list-itme>
                                                                <div flex layout-align="end center" ng-show="image.metadata.tags">
                                                                    <md-chips ng-model="image.metadata.tags" md-removable="false">
                                                                        <md-chip-template>
                                                                            {{ $chip }}
                                                                        </md-chip-template>
                                                                    </md-chips>
                                                                </div>
                                                            </md-list-itme>
                                                            <md-list-item>
                                                                <p>Cover of gallery</p>
                                                                <md-switch class="md-secondary" ng-model="image.metadata.cover"></md-switch>
                                                            </md-list-item>
                                                        </md-content>
                                                    </md-tab>
                                                </md-tabs>                                            
                                            </md-card-content>
                                            <md-card-actions ng-show="gallery_detail_view" layout="row" layout-align="center center">
                                                <span>
                                                    <md-radio-button ng-show="elementToUpdate" value="{{image.avatar ? image.avatar : image.source}}">Select Media</md-radio-button>
                                                </span>
                                                <span flex></span>
                                                <md-button ng-show="gallery_detail_view" class="md-raised" ng-click="deleteMedia(image, $index)" style="background-color: {{base_hue_lighter.value}}; color: {{base_hue_darkest.value}};">Delete</md-button>
                                                <md-button ng-show="gallery_detail_view" class="md-raised" ng-click="updateMedia(image)" style="background-color: {{primary_hue_normal.value}}; color: {{base_hue_lightest.value}};">Update</md-button>
                                            </md-card-actions>
                                        </md-card>
                                    </md-radio-group>
                                </div>
                                <div layout="row" layout-align="start center" layout-margin flex>
                                    <md-button ng-disabled="currentPage == 0" ng-click="currentPage = 0" class="md-icon-button" aria-label="Clear Media Search">
                                        <md-icon style="color: {{base_hue_darker.value}};">first_page</md-icon>
                                    </md-button>
                                    <md-button ng-disabled="currentPage == 0" ng-click="currentPage=currentPage-1" class="md-icon-button" aria-label="Clear Media Search">
                                        <md-icon style="color: {{base_hue_darker.value}};">chevron_left</md-icon>
                                    </md-button>
                                    <span>{{currentPage+1}}/{{numberOfPages}}</span>
                                    <md-button ng-disabled="currentPage == numberOfPages - 1" ng-click="currentPage=currentPage+1" class="md-icon-button" aria-label="Clear Media Search">
                                        <md-icon style="color: {{base_hue_darker.value}};">chevron_right</md-icon>
                                    </md-button>
                                    <md-button ng-disabled="currentPage == numberOfPages - 1" ng-click="currentPage = numberOfPages - 1" class="md-icon-button" aria-label="Clear Media Search">
                                        <md-icon style="color: {{base_hue_darker.value}};">last_page</md-icon>
                                    </md-button>
                                    <md-button  ng-show="elementToUpdate" ng-click="selectMedia(mediaVaultSelect); closeMediaVault()" class="md-icon-button" aria-label="Clear Media Search">
                                        <md-icon style="color: {{base_hue_darker.value}};">done_all</md-icon>
                                    </md-button>
                                </div>
                            </md-tab-body>
                        </md-tab>
                        <md-tab id="Galleries">
                            <md-tab-label>Manage Galleries</md-tab-label>
                            <md-tab-body>
                                <div layout-margin flex>
                                    <form name="uploads">
                                        <md-button class="button-color-border" ng-click="addGalleryTemplate()" ng-disabled="new_gallery || galleriesgridview == false">Add A Gallery</md-button>
                                        <md-button class="button-color-border" ng-click="switchViewGalleries()" ng-disabled="new_gallery">
                                        {{galleriesgridview == false ? "Grid View" : "List View"}}
                                        <md-icon ng-show="galleriesgridview == true" class="list-handle" style="color: {{primary_hue_normal.value}}; cursor: pointer;" aria-label="Remove List Item" md-font-library="material-icons">view_list</md-icon>
                                        <md-icon ng-show="galleriesgridview == false" class="list-handle" style="color: {{primary_hue_normal.value}}; cursor: pointer;" aria-label="Remove List Item" md-font-library="material-icons">view_module</md-icon>
                                        </md-button>
                                    </form>
                                </div>

                                <!-- Add A Gallery -->
                                <div flex>
                                    <div ng-show="galleriesgridview == false" layout="column" layout-align="center center" flex="100" layout-wrap layout-margin>
                                        <md-card class="md-card-base" style="width: 90%">
                                            <md-card-content class="lightweight-list-control" ui-sortable="sortableList" ng-model="gallerySortObj">
                                                <div ng-repeat="gallery in gallerySortObj" style="width: 100%;">
                                                    <md-list-item class="noright">
                                                        <p>{{ gallery.name }}</p>
                                                        <md-icon class="list-handle" style="color: {{primary_hue_normal.value}}; cursor: pointer;" aria-label="Remove List Item" md-font-library="material-icons">drag_handle</md-icon>
                                                    </md-list-item>
                                                    <md-divider></md-divider>
                                                </div>
                                            </md-card-content>
                                            <md-card-actions layout="row" layout-align="end center">
                                                <md-button class="md-raised" ng-click="updateGalleries(gallerySortObj)" style="background-color: {{primary_hue_normal.value}}; color: {{base_hue_lightest.value}};">Update</md-button>
                                            </md-card-actions>
                                        </md-card>
                                    </div>
                                    <div ng-show="galleriesgridview == true" layout="column" layout-gt-sm="row" layout-align="center center" flex layout-wrap layout-margin>
                                        <div ng-show="galleries.length > 9" layout="row" layout-align="start center" layout-margin flex="100">
                                            <md-button ng-disabled="currentGalleryPage == 0" ng-click="currentGalleryPage=currentGalleryPage-1" aria-label="previous gallery">
                                                <md-icon style="color: {{base_hue_darker.value}};">chevron_left</md-icon>
                                            </md-button>
                                            <span>{{currentGalleryPage+1}}/{{numberOfGalleryPages}}</span>
                                            <md-button ng-disabled="currentGalleryPage == numberOfGalleryPages - 1" ng-click="currentGalleryPage=currentGalleryPage+1" class="md-icon-button" aria-label="Clear Media Search">
                                                <md-icon style="color: {{base_hue_darker.value}};">chevron_right</md-icon>
                                            </md-button>
                                        </div>
                                        <md-card ng-show="galleries" class="md-card-base" ng-repeat="gallery in galleries | startFrom:currentGalleryPage*gallerySize | limitTo:gallerySize" flex flex-gt-sm="30">
                                            <md-card-title>
                                                <md-card-title-text layout="row" layout-align="start center">
                                                    <span class="md-headline">{{gallery.name || "New Gallery"}}</span>
                                                </md-card-title-text>
                                            </md-card-title>
                                            <md-card-content>
                                                <md-list-item>
                                                    <md-input-container class="md-block lightweight-md-input" flex>
                                                        <label>Name</label>
                                                        <input ng-disabled="gallery.key" ng-model="gallery.name">
                                                    </md-input-container>
                                                </md-list-item>
                                                <md-list-item>
                                                    <md-input-container class="md-block lightweight-md-input" flex>
                                                        <label>Description</label>
                                                        <input ng-model="gallery.description">
                                                    </md-input-container>
                                                </md-list-item>
                                                <md-list-item>
                                                    <md-input-container class="md-block lightweight-md-input" flex>
                                                        <label>URL</label>
                                                        <input disabled ng-model="gallery.url">
                                                    </md-input-container>
                                                </md-list-item>
                                                <md-list-item>
                                                    <p>Featured Gallery</p>
                                                    <md-switch class="md-secondary" ng-model="gallery.featured"></md-switch>
                                                </md-list-item>
                                                <md-list-item flex layout="row">
                                                    <p flex="20" hide-xs>Speed</p>
                                                    <md-slider-container flex="100" flex-gt-sm="80">
                                                        <md-slider flex min="0" max="10" ng-model="gallery.transition" aria-label="slider" id="slider[$index]">
                                                        </md-slider>
                                                        <md-input-container flex>
                                                            <input type="number" ng-model="gallery.transition" aria-label="slider" aria-controls="slider[$index]">
                                                        </md-input-container>
                                                    </md-slider-container>
                                                </md-list-item>  
                                            </md-card-content>
                                            <md-card-actions layout="row" layout-align="end center">
                                                <md-button ng-if="!gallery.id" ng-click="cancelGallery()" style="background-color: {{base_hue_lighter.value}}; color: {{base_hue_darkest.value}};">Cancel</md-button>
                                                <md-button ng-if="!gallery.id" class="md-raised" ng-click="addGallery(gallery)" style="background-color: {{primary_hue_normal.value}}; color: {{base_hue_lightest.value}};">Save</md-button>
                                                <md-button ng-if="gallery.id" class="md-raised" ng-click="updateGallery(gallery)" style="background-color: {{primary_hue_normal.value}}; color: {{base_hue_lightest.value}};">Update</md-button>
                                            </md-card-actions>
                                        </md-card>
                                    </div>
                                </div>
                                <!-- Add A Gallery -->
                                <div ng-show="galleries.length > 20 && galleriesgridview == true" layout="row" layout-align="start center" layout-margin flex>
                                    <md-button ng-disabled="currentGalleryPage == 0" ng-click="currentGalleryPage=currentGalleryPage-1" class="button-color-border">Previous</md-button>
                                    <span>{{currentGalleryPage+1}}/{{numberOfGalleryPages}}</span>
                                    <md-button ng-disabled="currentGalleryPage == numberOfGalleryPages - 1" ng-click="currentGalleryPage=currentGalleryPage+1" class="button-color-border">Next</md-button>
                                </div>
                            </md-tab-body>
                        </md-tab>
                        <md-tab id="Tags">
                            <md-tab-label>Manage Tags</md-tab-label>
                            <md-tab-body layout-align="column">
                                <div flex>
                                    <h1 class="h1">Add Tags</h1>
                                </div>
                                <div flex>
                                    <md-chips
                                    ng-model="tags"
                                    md-removable="true"
                                    placeholder="Enter a tag"
                                    delete-button-label="Remove Tag"
                                    delete-hint="Press delete to remove tag"
                                    secondary-placeholder="+Tag"></md-chips>
                                </div>
                                <br>
                                <div flex layout-align="end center" style="margin-bottom: 48px;">
                                    <md-button ng-click="updateTags(tags)" class="button-color-border">Add Tags</md-button>
                                </div>
                                <div flex layout-align="end center" ng-show="taglist">
                                    <md-chips ng-model="taglist" md-removable="false">
                                        <md-chip-template>
                                            {{ $chip.tag }}
                                        </md-chip-template>
                                    </md-chips>
                                </div>
                            </md-tab-body>
                        </md-tab>
                        <md-tab id="Uploads">
                            <md-tab-label>Upload</md-tab-label>
                            <md-tab-body>
                                <div layout-margin flex>
                                    <form name="uploads">
                                        <md-button ng-click="mediaVaultView = 'new download'" class="button-color-border" ngf-select ng-model="files" ngf-pattern="'image/*'" ngf-accept="'image/*'" ngf-max-size="20MB" ngf-min-height="100" ngf-multiple="true">Upload A New File</md-button>
                                    </form>
                                </div>
                                <!-- view - download preview -->
                                <div flex ng-show="mediaVaultView == 'new download'">
                                    <div layout="column" layout-gt-sm="row" flex layout-margin>
                                        <md-card ng-show="files" class="md-card-base" ng-repeat="file in files" flex flex-gt-sm="33">
                                            <md-card-title>
                                                <md-card-title-text>
                                                    <span class="md-headline">Upload Preview</span>
                                                </md-card-title-text>
                                            </md-card-title>
                                            <img ngf-src="file" class="md-card-image">
                                            <md-card-content>
                                                <md-list-item>
                                                    <md-input-container class="md-block lightweight-md-input" flex>
                                                        <label>Filename</label>
                                                        <input disabled ng-model="file.name">
                                                    </md-input-container>
                                                </md-list-item>
                                                <md-list-item flex>
                                                    <md-input-container style="margin-right: 16px" class="md-block lightweight-md-dropdown" flex>
                                                        <label class="lightweight-md-option-label">Choose Tags</label>
                                                        <md-select ng-model="file.tags" multiple>
                                                            <md-option class="lightweight-md-option" ng-repeat="imageTag in taglist" value="{{imageTag.tag}}">
                                                                {{imageTag.tag}}
                                                            </md-option>
                                                        </md-select>
                                                    </md-input-container>
                                                </md-list-item>
                                            </md-card-content>
                                            <md-card-actions layout="row" layout-align="end center">
                                                <md-button ng-click="files.splice($index, 1)" style="background-color: {{base_hue_lighter.value}}; color: {{base_hue_darkest.value}};">Cancel</md-button>
                                                <md-button class="md-raised" ng-click="$parent.mediaVaultView = 'downloads in progress'; sendFiles(files);" style="background-color: {{primary_hue_normal.value}}; color: {{base_hue_lightest.value}};">Upload</md-button>
                                            </md-card-actions>
                                        </md-card>
                                    </div>
                                </div>
                                <!-- view - download preview -->

                                <!-- view - downloading files -->
                                <div flex flex-gt-sm="40" ng-show="mediaVaultView == 'downloads in progress'">
                                    <div layout="column" flex>
                                        <md-card ng-repeat="f in files" class="md-card-base" style="background-color: {{base_hue_lightest.value}};">
                                            <md-card-title>
                                                <md-card-title-text>
                                                    <span class="md-headline">Uploaded File</span>
                                                </md-card-title-text>
                                            </md-card-title>
                                            <md-progress-linear md-mode="determinate" value="{{f.percentage}}"></md-progress-linear>
                                            <img ng-src="{{f.source}}" class="md-card-image" alt="{{f.filename}}">
                                            <md-card-content>
                                                <md-list-item>
                                                    <md-input-container class="md-block lightweight-md-input" flex>
                                                        <label>Filename</label>
                                                        <input disabled ng-model="f.filename">
                                                    </md-input-container>
                                                </md-list-item>
                                                <md-list-item layout="row" layout-align="start center">
                                                    <div flex layout-align="end center" ng-show="f.tags">
                                                        <md-chips ng-model="f.tags" md-removable="false">
                                                            <md-chip-template>
                                                                {{ $chip }}
                                                            </md-chip-template>
                                                        </md-chips>
                                                    </div>
                                                </md-list-item>
                                            </md-card-content>
                                        </md-card>
                                    </div>
                                </div>
                                <!-- view - downloading files -->
                            </md-tab-body>
                        </md-tab>
                    </md-tabs>
                </md-content>
        </md-card-content>
        <md-card-actions layout="row" layout-align="end center">
            <md-button disabled>Superpowered by Lightweight</md-button>
            <div flex></div>
            <md-button class="md-raised" ng-click="closeMediaVault()" style="background-color: {{primary_hue_normal.value}}; color: {{base_hue_lightest.value}};">Close</md-button>
        </md-card-actions>
    </md-card>
</div>