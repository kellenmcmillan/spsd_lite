<div class="upload-dialog-curtain mediaVault" ng-show="media_vault_visible == true">
    <md-card class="upload-dialog md-card-base">
        <md-card-title>
            <md-card-title-text>
                <span class="md-headline">Media Vault</span>
            </md-card-title-text>
        </md-card-title>
        <md-card-content flex>
                <md-content class="md-padding" flex>
                    <md-tabs>
                        <md-tab id="MediaFiles">
                            <md-tab-label>Media Files</md-tab-label>
                            <md-tab-body>
                                <div layout="column" layout-gt-sm="row" layout-wrap layout-align="space-around center" flex>
                                    <div layout="row" layout-align="start center" layout-margin flex="100">
                                        <md-button ng-disabled="currentPage == 0" ng-click="currentPage=currentPage-1" class="button-color-border">Previous</md-button>
                                        <span>{{currentPage+1}}/{{numberOfPages}}</span>
                                        <md-button ng-disabled="currentPage == numberOfPages - 1" ng-click="currentPage=currentPage+1" class="button-color-border">Next</md-button>
                                    </div>
                                    <md-radio-group ng-model="mediaVaultSelect" layout="column" layout-gt-sm="row" layout-wrap layout-align="space-around center" flex>
                                        <md-card ng-cloak ng-show="imagelist" class="md-card-base" ng-repeat="image in imagelist | startFrom:currentPage*pageSize | limitTo:pageSize" flex flex-gt-sm="30">
                                            <img ng-cloak ng-src="{{image.source}}" class="md-card-image" ng-init="gallery_detail_view = false" ng-click="gallery_detail_view = true" ng-dblclick="gallery_detail_view = false">
                                            <md-card-content ng-show="gallery_detail_view">
                                                <md-list-item>
                                                    <md-input-container class="md-block lightweight-md-input" flex>
                                                        <label>Filename</label>
                                                        <input ng-model="image.source">
                                                    </md-input-container>
                                                </md-list-item>
                                                <md-list-item>
                                                    <md-input-container style="margin-right: 16px" class="md-block lightweight-md-dropdown" flex>
                                                        <label class="lightweight-md-option-label">Choose Tags</label>
                                                        <md-select ng-model="image.tags" multiple>
                                                            <md-option class="lightweight-md-option" ng-repeat="fileTag in taglist" value="{{fileTag.tag}}">
                                                                {{fileTag.tag}}
                                                            </md-option>
                                                        </md-select>
                                                    </md-input-container>
                                                </md-list-item>
                                                <md-list-itme>
                                                    <div flex layout-align="end center" ng-show="image.tags">
                                                        <md-chips ng-model="image.tags" md-removable="false">
                                                            <md-chip-template>
                                                                {{ $chip }}
                                                            </md-chip-template>
                                                        </md-chips>
                                                    </div>
                                                </md-list-itme>
                                            </md-card-content>
                                            <md-card-actions layout="row" layout-align="center center">
                                                <span>
                                                    <md-radio-button value="{{image.source}}" class="md-primary">Select Media</md-radio-button>
                                                </span>
                                                <span flex></span>
                                                <md-button ng-show="gallery_detail_view" class="md-raised" ng-click="null" style="background-color: {{base_hue_lighter.value}}; color: {{base_hue_darkest.value}};">Delete</md-button>
                                                <md-button ng-show="gallery_detail_view" class="md-raised" ng-click="null" style="background-color: {{primary_hue_normal.value}}; color: {{base_hue_lightest.value}};">Update</md-button>
                                            </md-card-actions>
                                        </md-card>
                                    </md-radio-group>
                                </div>
                                <div layout="row" layout-align="start center" layout-margin flex>
                                    <md-button ng-disabled="currentPage == 0" ng-click="currentPage=currentPage-1" class="button-color-border">Previous</md-button>
                                    <span>{{currentPage+1}}/{{numberOfPages}}</span>
                                    <md-button ng-disabled="currentPage == numberOfPages - 1" ng-click="currentPage=currentPage+1" class="button-color-border">Next</md-button>
                                </div>
                            </md-tab-body>
                        </md-tab>
                        <md-tab id="Galleries">
                            <md-tab-label>Manage Galleries</md-tab-label>
                            <md-tab-body>
                                <div layout-margin flex>
                                    <form name="uploads">
                                        <md-button class="button-color-border" ng-click="addGalleryTemplate()" ng-disabled="new_gallery">Add A Gallery</md-button>
                                    </form>
                                </div>

                                <!-- Add A Gallery -->
                                <div flex>
                                    <div layout="column" layout-gt-sm="row" layout-align="center center" flex layout-wrap layout-margin>
                                        <div layout="row" layout-align="start center" layout-margin flex="100">
                                            <md-button ng-disabled="currentGalleryPage == 0" ng-click="currentGalleryPage=currentGalleryPage-1" class="button-color-border">Previous</md-button>
                                            <span>{{currentGalleryPage+1}}/{{numberOfGalleryPages}}</span>
                                            <md-button ng-disabled="currentGalleryPage == numberOfGalleryPages - 1" ng-click="currentGalleryPage=currentGalleryPage+1" class="button-color-border">Next</md-button>
                                        </div>
                                        <md-card ng-show="galleries" class="md-card-base" ng-repeat="gallery in galleries | startFrom:currentGalleryPage*gallerySize | limitTo:gallerySize" flex flex-gt-sm="40">
                                            <md-card-title>
                                                <md-card-title-text layout="row" layout-align="start center">
                                                    <span class="md-headline">{{gallery.name || "New Gallery"}}</span>
                                                    <span flex></span>
                                                    <md-button ng-if="gallery.id" class="md-fab md-mini" ng-init="edit_gallery = false" ng-click="edit_gallery = true" aria-label="Gallery Settings">
                                                        <md-icon>create</md-icon>
                                                    </md-button>
                                                </md-card-title-text>
                                            </md-card-title>
                                            <md-card-content ng-show="edit_gallery">
                                                <md-list-item>
                                                    <md-input-container class="md-block lightweight-md-input" flex>
                                                        <label>Name</label>
                                                        <input ng-model="gallery.name">
                                                    </md-input-container>
                                                </md-list-item>
                                                <md-list-item>
                                                    <md-input-container class="md-block lightweight-md-input" flex>
                                                        <label>Description</label>
                                                        <textarea name="description" ng-model="gallery.description" rows="3" md-maxlength="300"></textarea>
                                                    </md-input-container>
                                                </md-list-item>
                                                <md-list-item>
                                                    <md-input-container class="md-block lightweight-md-input" flex>
                                                        <label>URL</label>
                                                        <input ng-model="gallery.url">
                                                    </md-input-container>
                                                </md-list-item>
                                                <md-list-item>
                                                    <p>Featured Gallery</p>
                                                    <md-switch class="md-secondary" ng-model="gallery.featured"></md-switch>
                                                </md-list-item>
                                                <md-list-item flex layout="row">
                                                    <p flex>Speed</p>
                                                    <md-slider-container flex>
                                                        <md-slider flex min="0" max="10" ng-model="gallery.transition" aria-label="slider" id="slider[$index]">
                                                        </md-slider>
                                                        <md-input-container>
                                                            <input flex type="number" ng-model="gallery.transition" aria-label="slider" aria-controls="slider[$index]">
                                                        </md-input-container>
                                                    </md-slider-container>
                                                </md-list-item>  
                                            </md-card-content>
                                            <md-card-actions layout="row" layout-align="end center">
                                                <md-button ng-if="!gallery.id" ng-click="deleteGallery()" style="background-color: {{base_hue_lighter.value}}; color: {{base_hue_darkest.value}};">Delete</md-button>
                                                <md-button ng-if="!gallery.id" class="md-raised" ng-click="addGallery(gallery)" style="background-color: {{primary_hue_normal.value}}; color: {{base_hue_lightest.value}};">Save</md-button>
                                                <md-button ng-show="edit_gallery" ng-if="gallery.id" class="md-raised" ng-click="updateGallery(gallery)" style="background-color: {{primary_hue_normal.value}}; color: {{base_hue_lightest.value}};">Update</md-button>
                                            </md-card-actions>
                                        </md-card>
                                    </div>
                                </div>
                                <!-- Add A Gallery -->
                                <div layout="row" layout-align="start center" layout-margin flex>
                                    <md-button ng-disabled="currentGalleryPage == 0" ng-click="currentGalleryPage=currentGalleryPage-1" class="button-color-border">Previous</md-button>
                                    <span>{{currentGalleryPage+1}}/{{numberOfGalleryPages}}</span>
                                    <md-button ng-disabled="currentGalleryPage == numberOfGalleryPages - 1" ng-click="currentGalleryPage=currentGalleryPage+1" class="button-color-border">Next</md-button>
                                </div>
                            </md-tab-body>
                        </md-tab>
                        <md-tab id="Tags">
                            <md-tab-label>Manage Tags</md-tab-label>
                            <md-tab-body layout-align="column">
                                <div flex>
                                    <h1 class="h1">Add Tags</h1>
                                </div>
                                <div flex>
                                    <md-chips
                                    ng-model="tags"
                                    md-removable="true"
                                    placeholder="Enter a tag"
                                    delete-button-label="Remove Tag"
                                    delete-hint="Press delete to remove tag"
                                    secondary-placeholder="+Tag"></md-chips>
                                </div>
                                <br>
                                <div flex layout-align="end center" style="margin-bottom: 48px;">
                                    <md-button ng-click="updateTags(tags)" class="button-color-border">Add Tags</md-button>
                                </div>
                                <div flex layout-align="end center" ng-show="taglist">
                                    <md-chips ng-model="taglist" md-removable="false">
                                        <md-chip-template>
                                            {{ $chip.tag }}
                                        </md-chip-template>
                                    </md-chips>
                                </div>
                            </md-tab-body>
                        </md-tab>
                        <md-tab id="Uploads">
                            <md-tab-label>Upload</md-tab-label>
                            <md-tab-body>
                                <div layout-margin flex>
                                    <form name="uploads">
                                        <md-button ng-click="mediaVaultView = 'new download'" class="button-color-border" ngf-select ng-model="files" ngf-pattern="'image/*'" ngf-accept="'image/*'" ngf-max-size="20MB" ngf-min-height="100" ngf-multiple="true">Upload A New File</md-button>
                                    </form>
                                </div>
                                <!-- view - download preview -->
                                <div flex ng-show="mediaVaultView == 'new download'">
                                    <div layout="column" layout-gt-sm="row" flex layout-margin>
                                        <md-card ng-show="files" class="md-card-base" ng-repeat="file in files" flex flex-gt-sm="33">
                                            <md-card-title>
                                                <md-card-title-text>
                                                    <span class="md-headline">Upload Preview</span>
                                                </md-card-title-text>
                                            </md-card-title>
                                            <img ngf-src="file" class="md-card-image">
                                            <md-card-content>
                                                <md-list-item>
                                                    <md-input-container class="md-block lightweight-md-input" flex>
                                                        <label>Filename</label>
                                                        <input ng-model="file.name">
                                                    </md-input-container>
                                                </md-list-item>
                                                <md-list-item>
                                                    <p>Tags</p>
                                                    <md-input-container style="margin-right: 16px" class="md-block lightweight-md-dropdown" flex-gt-sm>
                                                        <label class="lightweight-md-option-label">Choose Tags</label>
                                                        <md-select ng-model="file.tag" multiple>
                                                            <md-option class="lightweight-md-option" ng-repeat="imageTag in taglist" value="{{imageTag.tag}}">
                                                                {{imageTag.tag}}
                                                            </md-option>
                                                        </md-select>
                                                    </md-input-container>
                                                </md-list-item>
                                            </md-card-content>
                                            <md-button ng-click="endImageUpload()" style="background-color: {{base_hue_lighter.value}}; color: {{base_hue_darkest.value}};">Cancel</md-button>
                                            <md-button class="md-raised" ng-click="sendFiles(files); mediaVaultView = 'downloads in progress'" style="background-color: {{primary_hue_normal.value}}; color: {{base_hue_lightest.value}};">Upload</md-button>
                                        </md-card>
                                    </div>
                                </div>
                                <!-- view - download preview -->

                                <!-- view - downloading files -->
                                <div flex flex-gt-sm="40" ng-show="mediaVaultView == 'downloads in progress'">
                                    <div layout="column" flex>
                                        <md-card ng-repeat="f in files" class="md-card-base" style="background-color: {{base_hue_lightest.value}};">
                                            <md-card-title>
                                                <md-card-title-text>
                                                    <span class="md-headline">Uploaded File</span>
                                                </md-card-title-text>
                                            </md-card-title>
                                            <md-progress-linear md-mode="determinate" value="{{f.percentage}}"></md-progress-linear>
                                            <img ng-src="{{f.source}}" class="md-card-image" alt="{{f.filename}}">
                                            <md-card-content>
                                                <md-list-item>
                                                    <md-input-container class="md-block lightweight-md-input" flex>
                                                        <label>Filename</label>
                                                        <input ng-model="f.filename">
                                                    </md-input-container>
                                                </md-list-item>
                                                <md-list-item layout="row" layout-align="start center">
                                                    <md-button>Slideshow</md-button>
                                                    <md-button>Landscape Management</md-button>
                                                </md-list-item>
                                            </md-card-content>
                                        </md-card>
                                    </div>
                                </div>
                                <!-- view - downloading files -->
                            </md-tab-body>
                        </md-tab>
                    </md-tabs>
                </md-content>
        </md-card-content>
        <md-card-actions layout="row" layout-align="end center">
            <md-button class="md-raised" ng-click="closeMediaVault()" style="background-color: {{primary_hue_normal.value}}; color: {{base_hue_lightest.value}};">Close</md-button>
        </md-card-actions>
    </md-card>
</div>